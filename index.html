<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>КУРСАЧ САИМУР</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-main">
                    <div class="header-logo">НАЦИОНАЛЬНЫЙ СТАТИСТИЧЕСКИЙ КОМИТЕТ РЕСПУБЛИКИ БЕЛАРУСЬ</div>
                    <h1>АНАЛИЗ ЭКОНОМИЧЕСКИХ ПОКАЗАТЕЛЕЙ</h1>
                    <div class="subtitle">Теория игр: Игры с природой в условиях неопределенности и риска для принятия управленческих решений</div>
                </div>
                <div class="header-meta">
                    <div class="meta-item">Версия системы:</div>
                    <div class="meta-value">1.0.0 </div>
                    <div class="meta-item">Методология:</div>
                    <div class="meta-value">Игры с природой</div>
                    <div class="meta-item">Архитектура:</div>
                    <div class="meta-value">SOLID + OOP</div>
                </div>
            </div>
        </header>

        <div class="step-indicator">
            <div class="step-dot active" data-step="1"></div>
            <div class="step-dot" data-step="2"></div>
            <div class="step-dot" data-step="3"></div>
        </div>

        <div class="step-container">
            <!-- Шаг 1: Ввод матрицы -->
            <div class="step active" id="step1">
                <h2 class="step-title">Шаг 1: Формирование матрицы решений</h2>
                
                <div class="example-data">
                    <h4>Пример данных для анализа:</h4>
                    <p><strong>Стратегии:</strong> Регионы Республики Беларусь</p>
                    <p><strong>Состояния природы:</strong> индикаторы экономических показателей</p>
                    <p><strong>Значения:</strong> Интегральные оценки эффективности</p>
                    <button class="btn load-example-btn" onclick="app.loadExampleData()">Загрузить демонстрационные данные</button>
                </div>
                
                <div class="matrix-dimensions">
                    <div class="dimension-input">
                        <label for="strategies">Количество стратегий (альтернатив):</label>
                        <input type="number" id="strategies" min="2" max="10" value="4" onchange="app.createMatrix()">
                    </div>
                    <div class="dimension-input">
                        <label for="states">Количество состояний природы:</label>
                        <input type="number" id="states" min="2" max="10" value="5" onchange="app.createMatrix()">
                    </div>
                </div>
                
                <div class="section-title">Матрица эффективности стратегий при различных состояниях природы:</div>
                <div class="matrix-input-container">
                    <table class="matrix-table" id="matrix-table">
                        <!-- Матрица будет создана динамически -->
                    </table>
                </div>
                
                <div class="navigation">
                    <div></div>
                    <button class="btn" onclick="app.goToStep(2)">Перейти к условиям →</button>
                </div>
            </div>

            <!-- Шаг 2: Условия принятия решений -->
            <div class="step" id="step2">
                <h2 class="step-title">Шаг 2: Определение условий принятия решений</h2>
                
                <p class="section-title">Выберите тип информационной ситуации для анализа:</p>
                
                <div class="condition-selector">
                    <div class="condition-card" onclick="app.selectCondition('uncertainty', event)">
                        <div class="condition-title">Полная неопределенность</div>
                        <div class="condition-desc">
                            Вероятности состояний природы неизвестны или не могут быть объективно оценены. 
                            Применение классических критериев принятия решений: Вальда (максимин), Максимакс, Сэвиджа, Гурвица.
                        </div>
                    </div>
                    
                    <div class="condition-card" onclick="app.selectCondition('risk', event)">
                        <div class="condition-title">Условия риска (вероятностная модель)</div>
                        <div class="condition-desc">
                            Вероятности состояний природы известны или могут быть оценены экспертно.
                            Применение вероятностных критериев: Байеса, Лапласа.
                        </div>
                    </div>
                </div>
                
                <!-- Параметр для критерия Гурвица -->
                <div class="param-input" id="hurwitz-param" style="display: none;">
                    <h3 class="section-title">Параметр оптимизма-пессимизма (критерий Гурвица)</h3>
                    <div class="param-row">
                        <label for="alpha">Коэффициент оптимизма (α):</label>
                        <input type="range" id="alpha" min="0" max="1" step="0.1" value="0.5" 
                               oninput="document.getElementById('alpha-value').textContent = this.value">
                        <span id="alpha-value" style="margin-left: 10px; font-weight: 500;">0.5</span>
                    </div>
                    <p style="color: #718096; font-size: 0.85rem; margin-top: 8px;">
                        α = 1: полный оптимизм (критерий максимакса)<br>
                        α = 0: полный пессимизм (критерий Вальда)
                    </p>
                </div>
                
                <!-- Ввод вероятностей -->
                <div class="probability-inputs" id="probability-inputs" style="display: none;">
                    <h3 class="section-title">Распределение вероятностей состояний природы</h3>
                    <p>Введите вероятности для каждого состояния природы (сумма должна равняться 1):</p>
                    <div id="prob-container">
                        <!-- Вероятности будут созданы динамически -->
                    </div>
                    <p id="prob-sum" style="margin-top: 12px; font-weight: 500; color: #e53e3e;">Сумма: 0</p>
                </div>
                
                <div class="navigation">
                    <button class="btn btn-secondary" onclick="app.goToStep(1)">← Вернуться к матрице</button>
                    <button class="btn" onclick="app.goToStep(3)">Перейти к анализу →</button>
                </div>
            </div>

            <!-- Шаг 3: Результаты -->
            <div class="step" id="step3">
                <h2 class="step-title">Шаг 3: Результаты анализа и рекомендации</h2>
                
                <div id="results-container">
                    <!-- Результаты будут отображены здесь -->
                </div>
                
                <div class="navigation">
                    <button class="btn btn-secondary" onclick="app.goToStep(2)">← Вернуться к условиям</button>
                    <button class="btn" onclick="app.resetAnalysis()">Новый анализ</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>© 2025. По данным Национального статистического комитета Республики Беларусь.</p>
            <p>Система анализа экономических показателей на основе теории принятия решений.</p>
        </div>
    </div>

    <!-- Модальное окно для информации о критерии -->
    <div class="modal-overlay" id="criteria-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modal-criterion-name"></div>
                <button class="modal-close" onclick="app.uiManager.closeModal()">×</button>
            </div>
            <div class="modal-body" id="modal-criterion-description">
                <!-- Описание будет добавлено динамически -->
            </div>
        </div>
    </div>

    <!-- Подключение JavaScript файлов -->
    <script src="decision-matrix.js"></script>
    <script src="decision-criteria.js"></script>
    <script src="results-analyzer.js"></script>
    <script src="ui-manager.js"></script>
    <script src="criteria-info.js"></script>
    <script src="script-refactored.js"></script>
    
    <!-- Инициализация матрицы при загрузке страницы -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализация матрицы при загрузке страницы
            if (window.app) {
                app.createMatrix();
            } else {
                // Запасной вариант на случай, если app еще не загрузился
                setTimeout(function() {
                    if (window.app && typeof app.createMatrix === 'function') {
                        app.createMatrix();
                    }
                }, 500);
            }
        });
    </script>
</body>
</html>